The original code seems to be complete and correct. No bug was found.