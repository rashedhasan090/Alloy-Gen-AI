There seems to be no obvious bug in the given code.