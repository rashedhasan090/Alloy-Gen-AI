The bug in this specification is in the "weaklyConnected" predicate. The commented out line should be uncommented and the current line should be removed. The fixed code is:

pred weaklyConnected {
    all n:Node | Node in n.*(adj+~adj)
}